# 使い方

## ディレクトリ構成
imagesは意匠画像が入ったディレクトリ。
```
├── src/
│   ├── app.py             
│   └── build_db.py      
│
├── images/ 
├── id_map.json      
├── knowledge.json         
└── design_index.faiss     
```

## 使い方
1. 環境変数GEMINI_API_KEYを設定
2. python3 ./src/app.pyを実行
3. ローカルホストをブラウザで開く
4. 意匠にかかる物品、物品の説明、意匠の説明、意匠の画像を入力し、生成を行う。

## 反省点、今後の展望
Captionの生成にGEMINI_APIを使ったが、無料プランで作成したため、一回生成を行うのに大きく時間がかかり、キャプションの精査が実際にRAGを行って確認することが困難であった。  
現在、検索精度が著しく低い。Captionが意匠の特徴を十分に反映しておらず、また文章の構造など本質的でない部分がembeddingに影響を残してしまっていると思われる。  
7/4(Fri)は検索精度の向上、ColabでAPIを建てることを目的としたが、どちらも完了しなかった。(Captionから情報を取り出したりしたがうまくいかず、ColabもGemmmaがメモリオーバーしたため量子化モデルが必要だと思われる)  
これら2個の点とベンチマークの作成について今週は取り組みたいと思っております.
また、今回、クラウドを使えないことでの制約の大きさを実感したので、クラウド環境を用いた開発を勉強したいです。  

## リンク
id_map.json


